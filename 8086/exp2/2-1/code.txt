;-----------------------------------------------------------
;
;              Build this with the "Source" menu using
;                     "Build All" option
;
;-----------------------------------------------------------
;
;                           实验二示例程序 

;-----------------------------------------------------------
;                                                          |
;                                                          |
; 功能：控制7段数码管的显示                                |
; 编写：《嵌入式系统原理与实验》课程组                     |
;-----------------------------------------------------------
		DOSSEG
		.MODEL	SMALL		; 设定8086汇编程序使用Small model
		.8086				; 设定采用8086汇编指令集
;-----------------------------------------------------------
;	符号定义                                               |
;-----------------------------------------------------------
;

;-----------------------------------------------------------
;	定义数据段                                             |
;-----------------------------------------------------------
		.data					; 定义数据段;

	;		
;-----------------------------------------------------------
;	定义代码段                                             |
;-----------------------------------------------------------
		.code						; Code segment definition
;		.startup					; 定义汇编程序执行入口点

;-----------------------------------------------------------
;主程序部分,向扩展的存储器内放数据                         |
;-----------------------------------------------------------
Require1b:
		MOV AX,4000H                    ;指定DS开始地址
		MOV DS,AX
		MOV BX,0H
	
		MOV byte ptr [BX],0FFH					; 内存中写入0FFh
L1:     
		MOV BYTE PTR [BX],AL			;将AL中的数据以字节为单位送到DS:BX所指字节单元
		INC AL
		INC BX
		JNZ L1

WT1: 
		JMP WT1

Require1c:
		MOV AX,8000H                    ;指定DS开始地址
		MOV DS,AX
		MOV BX,0H
	
		MOV byte ptr [BX],0FFH					; 内存中写入0FFh
L2:     
		MOV BYTE PTR [BX],AL			;将AL中的数据以字节为单位送到DS:BX所指字节单元
		INC AL
		INC BX
		JNZ L2

WT2: 
		JMP WT2

Require1d:
                MOV AX,8000H                    ;指定DS开始地址
		MOV DS,AX
		MOV BX,0H
	
		MOV word ptr [BX],0FFH					; 内存中写入0FFh
L3:     
		MOV WORD PTR [BX],66BBh			;将AL中的数据以字节为单位送到DS:BX所指字节单元
		INC BX
		INC BX
		JNZ L3

WT3: 
		JMP WT3

;-----------------------------------------------------------
;	定义堆栈段                                             |
;-----------------------------------------------------------
		.stack 100h				; 定义256字节容量的堆栈

Main:
      JMP Require1d
		END	Main					;指示汇编程序结束编译
